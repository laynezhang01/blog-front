---
title: 恶补网络基础之DNS、CDN、HTTP常见状态码
createdAt: 1732626916250
tags: DNS, CDN, HTTP
cover: https://img.linzip.com/banner.webp
category: 网络基础
location: 深圳
summary: 前端开发五年多，对于很多东西都是多少知道点，或者之前看过一些。但是没有记住。以前对于这些东西没有深刻的理解，再或者没有实际使用，就遗忘掉了。最近求职，很多问题都是只能说出来一点点，所以最近的主题是复习和学习兼顾的。
---

## 1.DNS

域名系统（DNS）是互联网的电话簿。我们首先要知道，互联网的每台设备都是有ip地址的。而我们访问某个网址，实际上就是访问某个设备，域名只不过是提供给记忆的，毕竟谁能记住`191.199.111.122`这种乱码呢，电话号都不会记住的我表示一个也记不住。所以域名也可以理解是一种别名，最终还是要访问到设备ip的。所以，Web浏览器是通过 [互联网协议](https://www.cloudflare.com/learning/network-layer/internet-protocol/) （IP）地址进行交互。DNS将域名转换为IP地址，以便浏览器能够加载互联网资源。

好的，那么域名转换为ip的这个过程，也叫做dns解析过程。

### 域名结构树

其实DNS解析与图书馆找书很类似。都是索引查找。一般查找Javascript红宝书是从图书馆的计算机类目开始查找，dns解析也是这样一层一层查找。而DNS解析的根是由一群服务器组成，是13个域名管理，而13个域名是由12个独立机构运营。13个域名由很多服务器进行管理。大概有一千多个节点。

但是大多数服务器的节点ip一致，dns查找会找到最近的dns服务器，如何查找到最近的dns服务器呢。就是通过**任播**，这个还没有过多了解。

### 域名服务器

`www.linzip.com`

类似于这样的域名，其实是有三部分组成，从左到右，排除www，www属于是三级域名，类似于`mail.linzip.com`、`xxx.linzip.com`。这种都是三级域名。那么实际上从左到右，`linzip.com`，这里后面还隐藏了一个.，但是由于到了末尾，所以这里的`.`已经到头了，一般就都忽略了。所以域名结构其实是`linzip`是权威域名服务器，`.com`是顶级域名服务器，当然还包括其他域名，比如`.cn`、`.net`...，而最后省略的`.`则是根域名服务器。

根域名服务器管理顶级域名服务器，顶级域名服务器挂里权威域名服务器，权威域名服务器管理各自主机。

### 域名解析过程

DNS解析是先看浏览器有没有对应ip地址，查询本地文件是否有记录，如果有的话就不必要继续查询，直接返回ip地址。浏览器需要调用域名解析器去查询，解析器相当于DNS客户端，DNS为什么可以找到DNS服务器，是因为电脑里面都有配置，比如有些时候我们会需改DNS解析到8.8.8.8。所以是可以查找到的。本地DNS服务器一般由运营商提供。本地DNS服务器如果有结果就会返回非权威的ip地址，因为本地DNS服务器不接管域名，所以非权威。

如果本地DNS服务器没有找到结果，先会去查询根服务器，返回根服务器的服务器地址，根服务器会去查询根顶级域名服务器，返回顶级域名服务器的ip地址，顶级域名服务器会去查询权威服务器，返回权威服务器的ip地址给本地DNS服务器，本地DNS服务器发送ip到解析器。解析器发送给浏览器，DNS查询结束。解析器和本地服务器使用的是地递归式的方式传递，本地DNS服务器和三层服务器的查询过程使用迭代。

## 2.CDN

一般普通的部署方式是将网站部署到某一台机器上，假设这台机器在北京，那么从北京、河北、广东、新疆访问该网站的速度肯定是不相同的。肯定是越近的访问速度越快。当然了，某些国外的服务器，国内除了访问慢，还有可能无法访问，比如vercel部署的服务。

以下是我对CDN的理解。

这时候我们就想，那是否可以部署多台服务器，然后我们根据用户的访问时所在的地址进行分配，去到最近的服务器上呢。那我们知道域名输入到访问是要经历DNS解析的。而DNS的查询过程中我们并没有办法自己做分发。除非我们做了一个DNS服务器。但是这样做的成本明显太高了。庆幸的是，已经有人做了这样的事情。而这些服务商，其实也就是DNS权威服务器的这一层，由他们做内容上的分发。而CDN会缓存我们所需的静态资源，然后当用户访问某个网站的时候，从解析器到本地服务器，根服务器，顶级域名服务器，权威服务器的这一步会返回就近的ip地址。从而提高用户的访问距离，加快速度。这就是CDN的基本作用，做内容分发。除此之外，CDN还会判断某台服务器的拥挤情况，如果该服务器拥挤，出现的情况可能不是就近分发。以及当服务器宕机的时候，由于一些缓存策略的影响，可以规避一些访问失败的情况。

## 3.http的常见状态码

### 1xx信息性状态码

这种很少见（我是没有遇见过），它们主要是通知客户端继续传输请求

#### 100 Continue

-   **用途及具体情境**： 该状态码表示服务器已收到请求头信息，我们可以继续发送请求主体。在上传大文件时很有用。
-   **处理流程示例**： 客户端发送一个初始请求头，服务器返回 100 Continue，客户端继续发送数据。

#### 101 Switching Protocols

-   **用途及具体情境**： 服务器理解并愿意遵从客户端请求，通过协议切换来实现，比如从 HTTP 切换到 WebSocket。
-   **示例说明**： 采用 WebSocket 进行双向通信时，初次连接会使用 HTTP，然后升级为 WebSocket 协议。

### 2xx成功状态码

成功状态码表示请求已成功被服务器处理。

#### 200 OK

-   **用途及具体情境**： 请求成功，服务器返回资源。最常见的状态码。
-   **常见使用示例**： 浏览任意网页时成功加载资源。

#### 201 Created

-   **用途及具体情境**： 请求成功并且服务器创建了新的资源，通常用于 POST 请求。
-   **常见使用示例**： 表单提交成功后创建新用户，服务器返回 201 状态码。

#### 204 No Content

-   **用途及具体情境**： 请求成功但服务器没有内容返回。在避免页面刷新或资源冗余传输时有用。
-   **常见使用示例**： 前端发请求修改数据，服务器处理成功但无需返回内容时。

## 3xx重定向状态码

重定向状态码表示需要客户端进行额外的操作才能完成请求。

#### 301 Moved Permanently

-   **用途及具体情境**： 资源永久性移除了新位置。
-   **SEO 方面的影响**： 有助于保持链接的权重和排名。
-   **常见使用示例**： 网站更换域名，旧域名重定向到新域名。

#### 302 Found

-   **用途及具体情境**： 资源临时移除到新位置。
-   **历史背景与当前使用**： 初期用于临时重定向，现代常用于表示资源正在被暂时搬迁。

#### 304 Not Modified

-   **用途及具体情境**： 资源未被修改，客户端缓存在使用。
-   **缓存机制中的应用**： 通过 ETag 或 Last-Modified 头部来设置

## 4xx客户端错误状态码

#### 400 Bad Request

-   **用途及具体情境**： 请求格式有误或请求数据不合法。
-   **常见错误原因与解决办法**： 检查请求参数和数据格式。

#### 401 Unauthorized

-   **用途及具体情境**： 需要用户认证。
-   **授权机制与常用方案**： 例如 OAuth 等认证方式。

#### 403 Forbidden

-   **用途及具体情境**： 用户认证成功，但无权访问。
-   **权限约束的使用**： 例如访问管理员页面时普通用户收到 403。

#### 404 Not Found

-   **用途及具体情境**： 请求的资源不存在。
-   **对用户体验的影响**： 常见的页面未找到错误，需要提供友好的界面。
-   **常见解决方案**： 检查 URL 是否正确，确保资源存在。

#### 418 I'm a teapot

-   **源自何处及其意义**： 这个状态码源自 1998 年的 HTTP 愚人节笑话——"I'm a teapot"，表示服务器拒绝泡咖啡请求，因为它是个茶壶。
-   **趣味与实际情况**： 虽然不可用，但在开发者社区中广为人知，作为趣味性的调侃。

#### 429 Too Many Requests

-   **用途及具体情境**： 表示客户端发送的请求过多，被限流。
-   **流量限制机制**： 常用在 API 接口限流，防止滥用。

## 5xx服务器错误状态码

服务器错误状态码表示服务器在处理请求时出错。

#### 500 Internal Server Error

-   **用途及具体情境**： 服务器内部错误，无法处理请求。
-   **常见错误原因及排查方法**： 代码 bug，服务器配置问题，系统异常等。

#### 502 Bad Gateway

-   **用途及具体情境**： 服务器作为网关或代理，从上游服务器接收到无效响应。
-   **反向代理与网关的作用**： 通常在负载均衡或代理服务器出问题时看到。

#### 503 Service Unavailable

-   **用途及具体情境**： 服务器当前无法处理请求，一般是临时状态。
-   **服务维护及负载过载处理**： 例如服务器过载、维护中等。
